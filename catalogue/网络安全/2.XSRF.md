# XSRF 跨站请求伪造攻击

> 跨站请求伪造攻击（cross-site-request-forgery），简称 CSRF 攻击。其攻击原理就是攻击者冒用用户的信息，对网站进行请求攻击。比如用户访问 A 网站登录，然后攻击者诱惑用户打开 B 网站。B 网站中发起了对 A 网站的恶意请求，那么 A 网站就会受到恶意攻击。

## 攻击方式

### 一.使用 get 请求

> 攻击者利用网站的 get 请求改变服务器的数据、状态和运行某些逻辑动作。比如转账，发布淫秽信息等。

模拟场景

1. 用户访问 A 网站登录
2. 攻击者诱惑用户点开 B 网站
3. B 网站使用 img/a 标签等手段发起对 A 网站的恶意请求

### 二.使用 post 请求

> 攻击利用表单提交发起 post 请求改变服务器的数据、状态和运行某些逻辑动作。

模拟场景

1. 用户访问 A 网站登录
2. 攻击者诱惑用户点开 B 网站
3. B 网站使用 form 标签等手段发起对 A 网站的恶意请求

## 防御手段

1. 使用验证码（用户体验不好）
2. 通过 referer/origin header 头判断来源（请求头可以更改）
3. 使用 SameSite Cookie 属性 （兼容性不佳）
4. 双重 cookie 验证
